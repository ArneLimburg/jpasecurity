<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplified DocBook XML V1.1//EN" "http://www.oasis-open.org/docbook/xml/simple/1.1/sdocbook.dtd">
<article id="rule-based">
  <title>Basics</title>
  <para>
    In JPA Security the access to entities and embeddables is defined by access rules.
    There is one set of access rules per persistence unit. This set of access rules
    applies to every JPA query and every entity and embeddable you get out of your
    <systemitem>EntityManager</systemitem>. Every rule may be restricted to be valid
    for just one user or role or a group of users or roles.
  </para>
  <section>
    <title>Example: Access Rule</title>
    <para>
      The following rule restricts the read access to accounts,
      where the owner is equal to the current user. In other words:
      every user can read only its own accounts.
    </para>
    <programlisting>
      GRANT READ ACCESS TO Account account WHERE account.owner = CURRENT_PRINCIPAL
    </programlisting>
  </section>
  <section>
    <title>Access Rules in JPA Security</title>
    <para>
      JPA Security allows the definition of rules that grant create, read, update and/or delete access.
      Currently there is no explicit way to deny access. Although this is not needed,
      since every entity or embeddable to which no access is granted may not be accessed.
      An exception from this behaviour are classes for which no access rule exists at all.
      Objects of such class may be accessed without any restriction.
    </para>
  </section>
</article>