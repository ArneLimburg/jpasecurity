<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

    <!-- INTERFACE -->
    <cc:interface name="loginDialog">
      <cc:attribute name="usernameLabel" default="Username: "/>
      <cc:attribute name="passwordLabel" default="Password: "/>
      <cc:attribute name="loginButtonText" default="Login"/>
      <cc:attribute name="cancelButtonText" default="Cancel"/>
      <cc:attribute name="loginAction" method-signature="java.lang.String action(java.lang.String, java.lang.String)" default="#{facesContext.externalContext.request.login}"/>
      <cc:attribute name="cancelAction" method-signature="java.lang.String action()" default="#{net_sf_jpasecurity_jsf_LoginBean.cancel}"/>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
      <h:panelGroup rendered="#{facesContext.externalContext.request.queryString == 'form-based'}">
        <form name="loginForm"
              method="post"
              action="j_security_check"
              enctype="application/x-www-form-urlencoded">
          <label for="username"><h:outputText value="#{cc.attrs.usernameLabel}"/></label>
          <input id="username" type="text" name="j_username" title="#{cc.attrs.usernameLabel}"/>  
          <label for="password"><h:outputText value="#{cc.attrs.passwordLabel}"/></label>
          <input id="password" type="password" name="j_password" title="#{cc.attrs.passwordLabel}"/>  
		  <br />
		  <div class="buttons">
		    <input type="submit" value="#{cc.attrs.loginButtonText}" />
		    <input type="reset" value="#{cc.attrs.cancelButtonText}" />
		  </div>
		</form>        
      </h:panelGroup>
      <h:panelGroup rendered="#{facesContext.externalContext.request.queryString != 'form-based'}">
        <h:form>
          <h:outputLabel value="#{cc.attrs.usernameLabel}" for="username"/>
          <h:inputText id="username" value="#{net_sf_jpasecurity_jsf_LoginBean.username}" />

          <h:outputLabel value="#{cc.attrs.passwordLabel}" for="password"/>
          <h:inputSecret id="password" value="#{net_sf_jpasecurity_jsf_LoginBean.password}"/>
		  <br />
		  
          <h:panelGroup layout="block" styleClass="buttons">
            <h:commandButton id="loginButton"
                             value="#{cc.attrs.loginButtonText}"
                             action="#{net_sf_jpasecurity_jsf_LoginBean.login}"/>
            <h:commandButton id="cancel"
                             value="#{cc.attrs.cancelButtonText}"
                             action="#{net_sf_jpasecurity_jsf_LoginBean.reset}"/>
          </h:panelGroup>
        </h:form>
      </h:panelGroup>
    </cc:implementation>
</html>